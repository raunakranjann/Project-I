<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Class Sessions</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="p-6 bg-gray-100">

<!-- HEADER -->
<div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-semibold text-gray-800">Class Sessions</h2>
    <a href="/admin/dashboard"
       class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
        Back to Dashboard
    </a>
</div>

<!-- TABLE -->
<div class="bg-white rounded-lg shadow p-6">

    <table class="w-full border-collapse">
        <thead>
        <tr class="bg-gray-100">
            <th class="p-3 border">ID</th>
            <th class="p-3 border">Subject</th>
            <th class="p-3 border">Start</th>
            <th class="p-3 border">End</th>
            <th class="p-3 border text-center">Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="c : ${classes}"
            th:classappend="
                ${c.status == 'DELETED'} ? 'bg-red-50 text-red-700' :
                (${c.status == 'EXPIRED'} ? 'bg-gray-50 text-gray-600' :
                'hover:bg-gray-50')">

            <td class="p-3 border" th:text="${c.id}"></td>

            <td class="p-3 border font-medium">
                <span th:text="${c.subjectName}"></span>

                <!-- STATUS BADGES -->
                <span th:if="${c.status == 'DELETED'}"
                      class="ml-2 text-xs bg-red-200 text-red-800 px-2 py-1 rounded">
                    DELETED
                </span>

                <span th:if="${c.status == 'LIVE'}"
                      class="ml-2 text-xs bg-green-200 text-green-800 px-2 py-1 rounded">
                    LIVE
                </span>

                <span th:if="${c.status == 'FUTURE'}"
                      class="ml-2 text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded">
                    FUTURE
                </span>

                <span th:if="${c.status == 'EXPIRED'}"
                      class="ml-2 text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">
                    EXPIRED
                </span>
            </td>

            <td class="p-3 border" th:text="${c.startTime}"></td>
            <td class="p-3 border" th:text="${c.endTime}"></td>

            <td class="p-3 border text-center space-x-2">

                <!-- NO ACTIONS IF DELETED -->
                <span th:if="${c.status == 'DELETED'}"
                      class="italic text-red-600 text-sm">
                    No actions
                </span>

                <!-- FUTURE + LIVE -->
                <th:block th:if="${c.status == 'FUTURE' or c.status == 'LIVE'}">
                    <a th:href="@{/admin/classes/edit/{id}(id=${c.id})}"
                       class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">
                        Edit
                    </a>

                    <a th:href="@{/admin/classes/delete/{id}(id=${c.id})}"
                       onclick="return confirm('Delete this class?')"
                       class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">
                        Delete
                    </a>
                </th:block>

                <!-- EXPIRED -->
                <span th:if="${c.status == 'EXPIRED'}"
                      class="italic text-gray-500 text-sm">
                    No actions
                </span>

            </td>
        </tr>
        </tbody>
    </table>

    <!-- EMPTY STATE -->
    <div th:if="${#lists.isEmpty(classes)}"
         class="text-center text-gray-500 py-6">
        No class sessions available.
    </div>

</div>

</body>
</html>
